<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyShopLK Kids - Magical Storybook Realm</title>
    
    <!-- Premium Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Dancing+Script:wght@700&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    
    <!-- Frameworks & Icons -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root {
            --gold: #d4af37;
            --paper: #fdfbf7;
            --spine: #2c1810;
            --magic-green: #1a472a;
            --shadow: rgba(0, 0, 0, 0.4);
        }

        body {
            margin: 0;
            font-family: 'Quicksand', sans-serif;
            background: radial-gradient(circle, #1e293b 0%, #020617 100%);
            color: #333;
            min-height: 100vh;
            overflow-x: hidden;
            transition: background 0.5s ease;
        }

        /* Google Translate Styling Overrides */
        #google_translate_element {
            padding: 5px;
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
        }
        .goog-te-banner-frame { display: none !important; }
        body { top: 0 !important; }
        .skiptranslate iframe { display: none !important; }

        /* Magical Header */
        header {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(12px);
            border-bottom: 3px solid var(--gold);
            z-index: 100;
        }

        /* 3D Book Library UI */
        .library-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 4rem;
            padding: 4rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .book-item {
            perspective: 1000px;
            cursor: pointer;
        }

        .book-3d-card {
            width: 240px;
            height: 340px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            margin: 0 auto;
        }

        .book-item:hover .book-3d-card {
            transform: rotateY(-35deg) rotateX(5deg);
        }

        .book-3d-cover {
            position: absolute;
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 4px 15px 15px 4px;
            z-index: 2;
            backface-visibility: hidden;
            border: 2px solid var(--gold);
            box-shadow: 10px 10px 30px rgba(0,0,0,0.5);
        }

        .book-3d-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .book-3d-side {
            position: absolute;
            width: 40px;
            height: 100%;
            background: var(--spine);
            left: -20px;
            transform: rotateY(-90deg);
            border-radius: 5px 0 0 5px;
            border-left: 2px solid var(--gold);
            box-shadow: inset -5px 0 10px rgba(0,0,0,0.5);
        }

        /* REALISTIC BOOK CONTAINER */
        .book-container {
            width: 95%;
            max-width: 1200px;
            height: 75vh;
            min-height: 500px;
            background: #444;
            border-radius: 12px;
            position: relative;
            display: flex;
            box-shadow: 0 50px 100px rgba(0,0,0,0.9);
            overflow: hidden;
            margin: 20px auto;
        }

        .book-spine {
            position: absolute;
            left: 50%;
            top: 0; bottom: 0;
            width: 30px;
            background: linear-gradient(to right, rgba(0,0,0,0.3), rgba(0,0,0,0.1), rgba(0,0,0,0.3));
            transform: translateX(-50%);
            z-index: 20;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }

        .page {
            flex: 1;
            height: 100%;
            background: var(--paper);
            position: relative;
            display: flex;
            flex-direction: column;
            padding: 40px;
            box-sizing: border-box;
            overflow-y: auto;
        }

        .page-left {
            border-radius: 8px 0 0 8px;
            background: linear-gradient(to left, #e8e4db 0%, var(--paper) 10%);
            border-right: 1px solid rgba(0,0,0,0.1);
        }

        .page-right {
            border-radius: 0 8px 8px 0;
            background: linear-gradient(to right, #e8e4db 0%, var(--paper) 10%);
            padding: 0; /* Image page */
        }

        .story-text {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(1.8rem, 4vw, 3rem);
            line-height: 1.4;
            color: #2c1810;
            text-align: center;
        }

        .page-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: sepia(0.1);
        }

        /* Animations */
        .page-turn-anim {
            animation: flipPage 0.7s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes flipPage {
            0% { opacity: 0.5; transform: scale(0.98); }
            100% { opacity: 1; transform: scale(1); }
        }

        /* Controls */
        .nav-controls {
            display: flex;
            gap: 2rem;
            justify-content: center;
            padding: 2rem;
        }

        .magic-btn {
            background: var(--gold);
            color: black;
            padding: 1rem 2.5rem;
            border-radius: 50px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 10px 20px rgba(212, 175, 55, 0.4);
            transition: all 0.3s;
        }

        .magic-btn:hover:not(:disabled) {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 30px rgba(212, 175, 55, 0.6);
        }

        .magic-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* Full Screen Button */
        .full-screen-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: var(--gold);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: none;
            color: black;
        }

        @media (max-width: 768px) {
            .book-container {
                flex-direction: column;
                height: auto;
                min-height: 90vh;
            }
            .book-spine { display: none; }
            .page { width: 100%; flex: none; height: auto; padding: 30px; }
            .page-right { height: 400px; }
            .story-text { font-size: 2rem; }
        }
    </style>
</head>
<body>

    <header class="p-6 flex flex-col md:flex-row justify-between items-center">
        <div class="flex items-center gap-4 mb-4 md:mb-0">
            <div class="w-12 h-12 bg-[#d4af37] rounded-lg flex items-center justify-center text-black text-2xl shadow-lg">
                <i class="fas fa-wand-sparkles"></i>
            </div>
            <h1 class="font-['Cinzel'] text-[#d4af37] text-3xl tracking-widest uppercase">Magical Realm</h1>
        </div>

        <div class="flex items-center gap-6">
            <div id="google_translate_element"></div>
            <div id="realm-info" class="hidden md:flex flex-col items-end">
                <span class="text-[#d4af37] font-bold text-sm tracking-tighter" id="realm-animal">Guardian: Bald Eagle</span>
                <span class="text-white/40 text-[10px] uppercase font-black">Active Territory</span>
            </div>
        </div>
    </header>

    <main id="app-container">
        <!-- Dynamic Content -->
    </main>

    <button class="full-screen-btn" onclick="toggleFullScreen()" title="Full Screen Magic">
        <i class="fas fa-expand-arrows-alt"></i>
    </button>

    <!-- Google Translate Script -->
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                autoDisplay: false
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <script>
        const storyData = [
            {
                id: 'eli-elephant',
                title: "Eli the Honest Elephant",
                cover: "coverpage.jpg",
                moral: "A truthful heart is a happy heart.",
                pages: [
                    { text: "Once upon a time, a baby elephant named Eli found a giant stash of peanuts!", image: "page1.jpg" },
                    { text: "Eli ate them all, but told his Mama, 'A naughty monkey took them!'", image: "page2.jpg" },
                    { text: "Suddenly, Eli's tummy began to grumble and rumble very loudly!", image: "page3.jpg" },
                    { text: "Eli felt sad for lying and told Mama the whole truth. She gave him a big, warm hug.", image: "page4.jpg" },
                    { text: "Mama said, 'Honesty is the best superpower.' Eli felt light and happy again!", image: "page5.jpg" }
                ]
            }
        ];

        let activeBook = null;
        let currentPageIndex = 0;

        function renderLibrary() {
            activeBook = null;
            const container = document.getElementById('app-container');
            container.innerHTML = `
                <div class="text-center py-12">
                    <h2 class="font-['Cinzel'] text-5xl text-[#d4af37] mb-2">The Golden Bookshelf</h2>
                    <p class="text-white/40 font-bold uppercase tracking-widest text-xs mb-12">Select a portal to another world</p>
                    
                    <div class="library-grid">
                        ${storyData.map(story => `
                            <div class="book-item" onclick="openBook('${story.id}')">
                                <div class="book-3d-card">
                                    <div class="book-3d-side"></div>
                                    <div class="book-3d-cover">
                                        <img src="${story.cover}" alt="${story.title}">
                                    </div>
                                </div>
                                <div class="mt-8">
                                    <h3 class="font-['Cinzel'] text-xl text-[#d4af37]">${story.title}</h3>
                                    <p class="text-white/40 text-xs mt-2 uppercase tracking-widest">Interactive Tale</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function openBook(id) {
            activeBook = storyData.find(s => s.id === id);
            currentPageIndex = 0;
            renderReader();
        }

        function renderReader() {
            const container = document.getElementById('app-container');
            const isEnd = currentPageIndex === activeBook.pages.length;

            let content = "";

            if (isEnd) {
                content = `
                    <div class="w-full h-full flex flex-col items-center justify-center text-center p-12 bg-[#0a0a0a] text-white">
                        <i class="fas fa-star text-6xl text-[#d4af37] mb-8 animate-pulse"></i>
                        <h2 class="font-['Cinzel'] text-6xl mb-6">The Golden End</h2>
                        <div class="max-w-xl bg-white/5 p-8 rounded-3xl border border-white/10">
                            <p class="font-['Dancing_Script'] text-4xl text-[#d4af37]">"${activeBook.moral}"</p>
                        </div>
                        <button onclick="renderLibrary()" class="magic-btn mt-12">Return to Library</button>
                    </div>
                `;
            } else {
                const page = activeBook.pages[currentPageIndex];
                content = `
                    <div class="book-container page-turn-anim">
                        <div class="book-spine"></div>
                        
                        <!-- Left Page (Text) -->
                        <div class="page page-left">
                            <button onclick="readAloud('${page.text.replace(/'/g, "\\'")}')" class="absolute top-6 left-6 text-[#d4af37] text-2xl hover:scale-110 transition">
                                <i class="fas fa-volume-up"></i>
                            </button>
                            <div class="story-text">
                                ${page.text}
                            </div>
                            <div class="absolute bottom-6 left-6 text-[10px] font-black uppercase text-gray-400">
                                Chapter ${currentPageIndex + 1} of ${activeBook.pages.length}
                            </div>
                        </div>

                        <!-- Right Page (Image) -->
                        <div class="page page-right">
                            <img src="${page.image}" class="page-image" alt="Magical Scene">
                            <div class="absolute bottom-6 right-6 text-[10px] font-black uppercase text-white/50">
                                ${activeBook.title}
                            </div>
                        </div>
                    </div>

                    <div class="nav-controls">
                        <button class="magic-btn" onclick="changePage(-1)" ${currentPageIndex === 0 ? 'disabled' : ''}>
                            <i class="fas fa-arrow-left mr-2"></i> Previous
                        </button>
                        <button class="magic-btn" onclick="changePage(1)">
                            ${currentPageIndex === activeBook.pages.length - 1 ? 'Finish Tale' : 'Next Page'} <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                `;
            }

            container.innerHTML = `
                <div class="min-h-screen flex flex-col items-center justify-center py-10">
                    <button onclick="renderLibrary()" class="text-white/40 hover:text-[#d4af37] uppercase font-black text-xs tracking-widest mb-4">
                        <i class="fas fa-chevron-left"></i> Exit Journey
                    </button>
                    ${content}
                </div>
            `;
        }

        function changePage(dir) {
            currentPageIndex += dir;
            renderReader();
        }

        function readAloud(text) {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.pitch = 1.1;
            utterance.rate = 0.9;
            window.speechSynthesis.speak(utterance);
        }

        function toggleFullScreen() {
            const doc = window.document;
            const docEl = doc.documentElement;

            const requestFullScreen = docEl.requestFullscreen || docEl.mozRequestFullScreen || docEl.webkitRequestFullScreen || docEl.msRequestFullscreen;
            const cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;

            if (!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {
                requestFullScreen.call(docEl).catch(err => {
                    console.warn(`Error attempting to enable full-screen mode: ${err.message}`);
                });
            } else {
                cancelFullScreen.call(doc);
            }
        }

        // Auto-update animal based on Google Translate
        setInterval(() => {
            const translateCombo = document.querySelector('.goog-te-combo');
            const animalDisplay = document.getElementById('realm-animal');
            if (translateCombo && animalDisplay) {
                const lang = translateCombo.value;
                if (lang === 'si') animalDisplay.innerText = "Guardian: Wali Kukula";
                else if (lang === 'hi') animalDisplay.innerText = "Guardian: Bengal Tiger";
                else animalDisplay.innerText = "Guardian: Bald Eagle";
            }
        }, 2000);

        // Start
        window.onload = renderLibrary;
    </script>
</body>
</html>